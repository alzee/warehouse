# 战备器材保障与智能仓储系统 — 需求规格说明书（PRD）

版本：v1.0（草案）  
日期：2025-11-08  
密级：内部/受控  
编制单位：项目组

## 1. 文档说明
- 用途：本文件用于指导“战备器材保障与智能仓储系统”的设计与建设，明确项目目标、范围、功能与非功能要求、实施路线与验收标准。
- 读者：项目管理方、业务代表、建设单位、测试与运维团队、第三方集成方。
- 维护：文档采用版本化管理，重大变更须经双人复核与评审委员会确认后生效。

## 2. 建设背景与总体目标
### 2.1 背景
在新质战斗力建设与后勤保障体系现代化的大背景下，器材保障呈现“数量多、类别杂、频次高、响应快”的特点，传统人工作业与分散台账难以满足精准保障与快速投送要求。为提升战备物资的可视化、可管控、可追溯与可评估能力，亟需建设统一的智能仓储平台，支撑全流程、全要素的数字化管理与智能决策。

### 2.2 建设目标
- 体系化：构建“标准统一、流程闭环、数据贯通”的器材保障平台，实现“入库—在库—调拨—出库—盘点—报损—追溯”全生命周期管理。
- 智能化：引入预测分析、异常预警、语义检索与智能助手，形成“人机协同、数据驱动”的保障能力。
- 安全可控：构建符合军政单位安全合规要求的分域部署、最小授权、全量审计与灾备体系，确保数据主权与可控可管。
- 快速响应：实现任务态势下的快速组配、敏捷调度与一键追溯，提高战备响应速度与执行效率。

### 2.3 成功指标（示例，最终以验收标准为准）
- 库存准确率 ≥ 99.5%，紧急任务领用响应时间下降 ≥ 40%。
- 关键报表出具时间 ≤ 3 秒，系统可用性 ≥ 99.9%。
- 盘点作业人效提升 ≥ 50%，需求预测 MAPE ≤ 15%。

## 3. 项目概述
### 3.1 建设定位
建设一体化“战备器材保障与智能仓储系统”，作为器材管理的权威平台与数据枢纽，面向指挥、保障、仓储、装备等多角色提供在线化、流程化、智能化的能力支撑。

### 3.2 能力框架
- 业务域：主数据、出入库、调拨与任务、盘点与差异、报损与处置、追溯与审计。
- 支撑域：工作流与通知、报表与看板、移动作业、设备接入与物联、权限与审计。
- 数据与智能：数据治理、数据服务、智能分析（预测/异常/检索/助手）。
- 运维保障：监控告警、备份容灾、容量规划、版本与变更管理。

### 3.3 适用场景
- 战备拉动/实装演训物资集配与快速出入库。
- 多仓多库区的跨区域调拨与运输跟踪。
- 高价值/敏感器材的精细化管理与全链路追溯。
- 大规模周期性盘点与离线条件下的移动作业。
- 无感通行的批量出入库（RFID 通道门/读写器联动）与高频作业的扫码快进快出。

## 4. 术语与角色
- 术语：
  - ROP（再订货点）、Safety Stock（安全库存）、Lead Time（补货前置期）。
  - MAPE/sMAPE（预测误差指标）、Precision/Recall（异常检测评估）。
  - RFID 标签：贴附于器材或器材箱（容器）的射频识别标签（如 EPC 编码），可被固定/手持读写设备在一定范围内批量读取，实现无感识读。
  - 条码/二维码标签：贴附于器材或器材箱的可视化编码，使用扫描器逐一扫描完成识读。
- 角色：
  - 仓库管理员：日常入库、出库、盘点、报损、标签打印。
  - 审核员/主管：审批出入库与盘点差异、设定阈值、处置异常。
  - 设备使用者：借用/归还器材，提交用途与拍照凭证。
  - 系统管理员：权限分配、参数配置、数据归档与审计。
  - 领导/BI 分析：查看看板、趋势、预警与周/月报。
  - 硬件网关服务账号：RFID/扫码设备对接与边缘采集。

## 5. 总体目标与蓝图
- 统一的领域模型与事件流，标准化 REST API/JWT 鉴权，内外网分域与最小权限。
- 工作流驱动的出入库与盘点审批，消息中心（站内、邮件、企业微信/钉钉）。
- 移动端 Web/App 与离线缓存，扫码/拍照/批量导入导出，RFID/IoT 实时同步。
- AI 赋能：需求预测、异常检测、智能盘点（CV）、语义搜索、对话助手、智能补货建议。
- 数据中台：数据仓库与 ETL，驱动报表与外部 BI；标准化对接 ERP/MES。

## 6. 范围说明
- In Scope：器材与器材箱全生命周期、盘点、报损、工作流、移动端、AI 能力、对外集成、审计与安全。
- Out of Scope：财务结算、采购招标流程、复杂维修工单系统（可后续纳入）。

## 7. 功能需求
### 7.1 器材与主数据管理
- 器材：名称、单位、型号、品牌/厂家、供应商、有效期/批号、最小包装、图片与附件、单位换算。
- 类目与字典：类别、仓区、存放位置、计量单位、品牌、供应商；支持多仓库与库区层级。
- 标签打印：支持条码/二维码打印，模板可配置。

### 7.2 器材箱与位置管理
- 箱档案：条码、RFID、位置（库区/货架/层/位）、是否“单品箱”、状态（在库/外出/维护）。
- 箱内明细：多对多 Entry 维护数量、批号、有效期；支持批量导入/调整。
- 位置变更：拖拽式位置变更（前端）、变更记录与回溯。
  
#### 标签策略与贴标范围
- 贴标对象：支持“单件贴标（器材级）”与“箱贴标（容器级）”，可按不同品类、价值等级与作业频次配置策略，亦支持混合贴标（箱+件）。
- 标签形态：支持 RFID 芯片标签或条码/二维码标签，两者均可作为唯一标识；通过 RF 识读或扫描器实现快速进出库与盘点。
- 贴标规范：明确标签张贴位置、方向与材质要求，考虑金属/液体/温湿度等对识读影响；提供巡检与换标流程。
- 标识唯一性：标签与档案一一绑定，支持换标（保留关联历史）与挂失/作废流程，防止重复与冒用。
- RFID 标识与绑定：支持 EPC/TID 读写与档案绑定，标签生命周期管理（发放、挂失、作废、换标）。
- 读区与天线配置：支持读写器/天线/读区（入口/出口/库位）的分层配置，读功率、工作频段、读写间隔与驻留阈值策略可配。
- 抗碰撞与去重：同一会话内基于 EPC+RSSI+时间窗去重；跨会话基于轨迹合并防止重复记账。
- 通道与门禁联动：与道闸/门磁/信号灯联动，进入/离开判定基于天线阵列方向性与时间先后规则。

### 7.3 入库/出库/调拨（工作流驱动）
- 单据：入库单、出库单、调拨单、归还单、报损单；支持草稿/提交/审批/执行/关闭状态机。
- 审批：多级审批、阈值审批（超出安全库存/预算/权限时触发）；撤回、驳回、补充说明。
- 扫码作业：扫码选择箱/器材与数量；异常项（缺货、错码）记录与申诉。
- 通知：站内信、邮件、企业微信/钉钉 Bot；订阅策略（阈值、异常、审批结果）。
  
#### 作业对象与混扫策略
- 作业对象：支持以“器材单件标签”或“器材箱标签”为对象进行记账；当识读到箱标签时可按箱内清单整体入/出库，也可按颗粒度拆分。
- 混扫策略：同一批次可混合识读 RFID 与条码标签；系统基于幂等键合并重复识读，按“先箱后件、件覆盖箱”的规则消解冲突。

#### 快速出入库（RFID/扫码）
- RFID 无感出入：
  - 通道门/定点读写器实时采集 EPC 流，依据天线分区（入口/出口）与时间序列判定进/出方向；满足驻留阈值后触发批量入库/出库记账。
  - 同步校验：仅对已绑定档案的 EPC 记账，未备案/黑名单 EPC 进入“异常篮”待人工复核；可配置“只读不记账”监控模式。
  - 批量一致性：同一通行批次内的多标签合并为一事务，记账成功/失败具备原子性与补偿机制（重试、人工介入）。
  - 抗干扰：基于 RSSI/天线优先/时间窗策略降低误读，支持白/黑名单与静态遮蔽区（屏蔽误触发）。
- 扫码快进快出：
  - 连续扫描模式（蜂鸣/震动反馈），支持“一扫一件”与“扫箱带出整箱清单”两种模式；可选择数量/批次。
  - 离线队列：弱网环境下缓存扫描队列，恢复后按序上报；具备去重与幂等键，防止重复入账。
  - 冲突处理：与审批/库存阈值规则联动，超限时转入待审状态；支持一键生成异常处理单。
- 设备网关与安全：
  - 接入凭证：设备侧使用签名/时间戳/随机数校验，支持双向认证与白名单；请求具备序列号用于乱序重排与重放防护。
  - 指令控制：支持远程下发读功率/频段/读写频率、固件升级、黑白名单；设备状态上报（在线、温度、电压、故障码）。
  - 性能目标：单通道稳定识读能力满足批量通行场景，出入库事务端到端处理延时满足“秒级可感知、分钟级一致”。

### 7.4 盘点与差异
- 盘点模式：循环盘点、全盘；支持离线盘点（移动端缓存）与批量导入。
- 差异处理：盈亏原因分类（遗失、错账、报废、损坏），差异复核工作流。
- 可视化：盘点任务进度、差异热力图、历史差异趋势。

### 7.5 报表与看板
- 实时看板：库存总量、在库/使用中、出入库趋势、缺货预警、TOP N 领用排行。
- 报表中心：
  - 库存余额表、出入库明细表、账龄与周转率、有效期预警表。
  - 导出 Excel/CSV；计划任务按日/周/月发送报表。

### 7.6 搜索与追溯
- 全文检索：按名称/型号/标签/附件 OCR 文本；拼音/同义词；多条件过滤。
- 追溯：器材→箱→出入库→使用者→位置 关联轨迹，一键导出证据链。

### 7.7 对外集成
- API：RESTful + JWT/签名，资源：Item/Box/Entry/Movement/Inventory/Count/Report。
- Webhook：出入库事件、审批结果、阈值预警。
- ERP/MES：物料主数据、采购/领用单同步；对接方式通过消息队列或定时拉取。

## 8. AI 与智能化规划
### 8.1 需求预测与补货建议
- 粒度：按器材、仓库、月/周/日；考虑季节性与节假日。
- 算法：Prophet/ARIMA + 机器学习（XGBoost/LSTM）混合；结果集成采用加权或堆叠。
- 指标：MAPE、sMAPE、RMSE；面向业务展示 Top 不准项目与解释（SHAP）。
- 安全库存与 ROP：
  - ROP = 预测需求 × 交付前置期 + z × σ（前置期内需求波动）。
  - 服务水平由策略配置（例如 95% → z≈1.645）。
- 建议：生成补货建议清单（数量、时间、供应商、预计到货），可一键转采购/入库草稿。

### 8.2 异常检测与预警
- 输入：出入库日志时间序列、单据特征、用户行为（峰值/频率）。
- 模型：Isolation Forest/One-Class SVM/概率模型；或基于预测残差的阈值检测。
- 目标：异常出库、频繁小额领用、非法时段操作、设备状态异常、库存投机。
- 告警：多渠道通知、关联工单与处置状态、误报反馈用于在线学习。

### 8.3 智能盘点（CV + OCR）
- 移动端拍照识别箱/标签/数量（图像识别/OCR），半自动核对与差异标注。
- 模型：本地化 OCR（PaddleOCR）+ 轻量目标检测（YOLOv5n/YOLOv8n）。
- RFID 巡检盘点：
  - 手持式读写器/盘点车按库区/货架巡检，基于 EPC 清单与系统账面对比，自动生成“缺失/新增/位置偏移”报告。
  - 位置粗定位：多天线 RSSI/到达时间差（TDoA）融合获得库位级定位提示，辅助快速核对。
  - 盘点任务：支持断点续扫、去重与覆盖率统计；盘点完成度/耗时看板与差异处理闭环。

### 8.4 语义搜索与指挥助手
- Embedding：中文句向量（例如 BGE-base-zh/Sentence-Transformer）+ 向量检索（FAISS/ES 向量）。
- 能力：自然语言搜索“找10米电缆库存多少？”、“近三月最常用器材是什么？”
- 对话助手：流程引导、填单、对账、生成日报/周报；按照角色与权限裁剪回答。
- 私有化：支持离线/内网模型优先，必要时通过网关调用云端模型。

## 9. 数据治理与模型
- 关系模型增强：
  - Movement（出入库流水）标准化（type: in/out/transfer/adjust），补充关联合同/单据号、操作者、来源去向。
  - Supplier、PurchaseOrder、Attachment、Device/RFIDRead、Warehouse/Location 层级；单位换算表。
- 数据质量：唯一性约束（条码/RFID）、外键完整性、软删除策略、审计字段（创建/修改/来源）。
- 日志与审计：不可抵赖日志（append-only）、关键字段变更审计、操作留痕（IP、设备、位置）。
- 数据仓库：星型模型（事实表：库存余额、出入库流、盘点差异；维表：时间、器材、仓库、供应商）。

## 10. 安全与权限
- 认证：JWT/OAuth2，支持设备/服务账号与人类用户分离；MFA；IP 白名单。
- 授权：RBAC（角色-权限-资源-操作），细粒度到字段/仓库/区域。
- 合规：密码与密钥管理、传输与静态加密、数据脱敏、日志留存策略。
- 安全编码：输入校验、速率限制、CSRF/SQL 注入/越权防护。

## 11. 非功能与运行保障
- 性能：
  - 95th 响应时间 ≤ 300ms（读）、≤ 800ms（写）；高峰并发 200 RPS 可扩展。
  - 报表类接口支持异步生成与缓存。
- 可用性：SLA ≥ 99.9%；健康检查、熔断与限流；灰度发布与回滚。
- 可观察性：结构化日志、集中式追踪、关键 KPI 指标（Prometheus/Grafana）。
- 可靠性：主从与备份，RPO ≤ 5 分钟，RTO ≤ 30 分钟；定期演练。
- 可维护性：代码规范、单元/集成/E2E 测试覆盖率 ≥ 70%，CI/CD 全流程质量门禁。

## 12. 集成与互联（原则）
- 统一标准：遵循统一的数据接口规范与数据字典；接口具备可扩展版本控制与幂等保障。
- 互联互通：面向业务系统与设备网关提供安全的双向数据通道；支持任务/事件驱动的数据同步。
- 可控可审：对外数据交换全部纳入审计，关键链路具备重放与追溯能力。
  
— 集成补充原则 —
- 一致性与幂等：对外接口统一幂等键与重试策略；对事件进行去重与有序性保障（按资源与批次）。
- 数据完整性：对账、补偿与死信处理机制完备，确保在异常情况下的最终一致性。
- 时间与标识：统一时间基准与全局唯一标识生成策略，支持跨系统追踪（traceId）。

## 13. 前端与移动作业（原则）
- 体验一致：桌面端与移动端风格统一，关键能力移动优先，支持弱网与离线作业。
- 作业友好：扫码、拍照、语音/手势辅助输入；列表快速过滤与批量操作；适配佩戴手套等场景。
- 可达可用：支持深色/防眩与大字模式，满足长时间户外与夜间作业需求。
  
— 可用性与易用性度量 —
- 作业效率：关键路径（入库、出库、盘点）平均操作步骤数与完成时长监测并持续优化。
- 错误预防：高频误操作（误扫、重复、漏扫）可被界面与规则及时拦截并可恢复。
- 可达性：对弱网/夜间/寒冷环境提供专项适配与测试基线，保障一线作业连续性。

## 14. 实施路线与里程碑（建议）
- 阶段一：平台底座与主数据、权限与审计、出入库最小可用、移动扫码；基础报表与看板。
- 阶段二：工作流与通知、盘点与差异闭环、位置与任务可视化、设备网关接入与准实时同步。
- 阶段三：AI 预测补货与异常预警、语义检索与指挥助手、智能盘点 PoC → 规模化。
- 阶段四：数据中台与外部系统全面对接、高可用与容灾演练、跨区域多站点协同。

## 15. 验收标准与 KPI
- 业务：
  - 库存准确率 ≥ 99.5%；缺货率同比下降 ≥ 30%；盘点人效提升 ≥ 50%。
  - 预测：MAPE ≤ 15%，异常检测 Precision ≥ 0.85 / Recall ≥ 0.7。
- 技术：
  - 关键接口 95th 延迟 ≤ 300ms；错误率 ≤ 0.1%。
  - 测试覆盖率 ≥ 70%，关键路径 E2E 用例全绿；审计日志完整可检索。

## 16. 风险与假设
- 风险：历史数据质量、设备接入稳定性、模型冷启动、网络隔离与合规要求。
- 缓解：数据清洗与回填、边缘缓存与重试、规则 + 模型融合、私有化部署与密钥轮换。
- 假设：有可用的 RFID/扫码设备；允许接入企业微信/钉钉或邮件网关；可部署私有化模型服务。

## 17. 保密与合规要求
- 数据分级分类：对涉密/敏感数据定义分级策略，最小必要原则访问控制。
- 加密与国密：传输与静态加密采用符合相关规范的算法与密钥管理体系；介质出入库登记与审计。
- 审计与留痕：关键操作、参数变更、数据导出必须留痕可追溯，具备篡改检测能力。
- 合同与标准：遵循相关国家标准与行业规范，文件与接口留存备查。

## 18. 术语与缩略语
- ROP：再订货点；Safety Stock：安全库存；Lead Time：补货前置期。
- MAPE/sMAPE：预测误差指标；Precision/Recall：异常检测评估指标。
- PoC：概念验证；SLA：服务可用性协议；RPO/RTO：容灾目标。

— 本文档为项目立项与设计依据，评审通过后进入需求冻结与实施阶段 —
